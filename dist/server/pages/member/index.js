exports.ids = [22,5];
exports.modules = {

/***/ 43:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/MemberGlobalCard.vue?vue&type=template&id=6a336cc0&
var render = function render() {
  var _vm = this,
    _c = _vm._self._c;
  return _c('section', [_vm._ssrNode("<div" + _vm._ssrClass("w-full bg-white rounded-md relative", [_vm.height, _vm.px, _vm.py, _vm.mx, _vm.my, _vm.customCss, {
    'shadow-[0px_0px_4px_1px_#F1FF99]': _vm.isEdit,
    'shadow-[0px_2px_2px_rgba(0,0,0,0.25)]': !_vm.isEdit
  }]) + ">", "</div>", [_vm._t("default")], 2)]);
};
var staticRenderFns = [];

// CONCATENATED MODULE: ./components/MemberGlobalCard.vue?vue&type=template&id=6a336cc0&

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/MemberGlobalCard.vue?vue&type=script&lang=js&
/* harmony default export */ var MemberGlobalCardvue_type_script_lang_js_ = ({
  props: {
    isEdit: {
      type: Boolean,
      default: () => false
    },
    height: {
      type: String,
      default: () => 'min-h-[40px]'
    },
    py: {
      type: String,
      default: () => 'py-3'
    },
    px: {
      type: String,
      default: () => 'px-3'
    },
    my: {
      type: String,
      default: () => 'mb-2.5'
    },
    mx: {
      type: String,
      default: () => ''
    },
    customCss: {
      type: String,
      default: () => ''
    }
  },
  name: 'MemberGlobalCard'
});
// CONCATENATED MODULE: ./components/MemberGlobalCard.vue?vue&type=script&lang=js&
 /* harmony default export */ var components_MemberGlobalCardvue_type_script_lang_js_ = (MemberGlobalCardvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(3);

// CONCATENATED MODULE: ./components/MemberGlobalCard.vue





/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  components_MemberGlobalCardvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  null,
  null,
  "74a7f870"
  
)

/* harmony default export */ var MemberGlobalCard = __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 45:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "img/insideLogo.85c1f01.svg";

/***/ }),

/***/ 47:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(54);
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to SSR context
var add = __webpack_require__(15).default
module.exports.__inject__ = function (context) {
  add("39465c24", content, true, context)
};

/***/ }),

/***/ 53:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_3_oneOf_1_0_node_modules_nuxt_postcss8_node_modules_css_loader_dist_cjs_js_ref_3_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_nuxt_postcss8_node_modules_postcss_loader_dist_cjs_js_ref_3_oneOf_1_2_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_4e1966ac_prod_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(47);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_3_oneOf_1_0_node_modules_nuxt_postcss8_node_modules_css_loader_dist_cjs_js_ref_3_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_nuxt_postcss8_node_modules_postcss_loader_dist_cjs_js_ref_3_oneOf_1_2_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_4e1966ac_prod_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_3_oneOf_1_0_node_modules_nuxt_postcss8_node_modules_css_loader_dist_cjs_js_ref_3_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_nuxt_postcss8_node_modules_postcss_loader_dist_cjs_js_ref_3_oneOf_1_2_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_4e1966ac_prod_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_3_oneOf_1_0_node_modules_nuxt_postcss8_node_modules_css_loader_dist_cjs_js_ref_3_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_nuxt_postcss8_node_modules_postcss_loader_dist_cjs_js_ref_3_oneOf_1_2_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_4e1966ac_prod_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_3_oneOf_1_0_node_modules_nuxt_postcss8_node_modules_css_loader_dist_cjs_js_ref_3_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_nuxt_postcss8_node_modules_postcss_loader_dist_cjs_js_ref_3_oneOf_1_2_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_4e1966ac_prod_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));


/***/ }),

/***/ 54:
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(14);
var ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});
// Module
___CSS_LOADER_EXPORT___.push([module.i, ".newsTicker{animation:newsTickerAnimate 25s linear infinite}@keyframes newsTickerAnimate{0%{left:100%;transform:translateX(0)}to{left:0;transform:translateX(-100%)}}", ""]);
// Exports
___CSS_LOADER_EXPORT___.locals = {};
module.exports = ___CSS_LOADER_EXPORT___;


/***/ }),

/***/ 59:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/member/index.vue?vue&type=template&id=4e1966ac&
var render = function render() {
  var _vm = this,
    _c = _vm._self._c;
  return _c('div', [!_vm.isLoading ? _vm._ssrNode("<section class=\"w-full max-w-[768px] mx-auto\">", "</section>", [_vm._ssrNode("<header class=\"w-full pb-4 fixed top-5 left-0 z-10\"><div class=\"w-full mx-auto flex items-center gap-2 px-[5%]\"><h1><img" + _vm._ssrAttr("src", __webpack_require__(45)) + " alt=\"bos客戶預約系統\"></h1></div></header> "), _vm._ssrNode("<div class=\"flex items-center gap-4 mb-4\">", "</div>", [_vm._ssrNode("<div" + _vm._ssrClass("w-[90px] h-[90px] relative rounded-full", {
    'bg-[#AEAEAE] flex justify-center items-center': !_vm.member.imgUrl
  }) + ">", "</div>", [!_vm.member.imgUrl ? _c('fa', {
    staticClass: "text-white text-4xl",
    attrs: {
      "icon": "fa-regular fa-user"
    }
  }) : _c('img', {
    staticClass: "w-full h-full object-cover rounded-full",
    attrs: {
      "src": _vm.member.imgUrl,
      "alt": _vm.member.name
    }
  }), _vm._ssrNode(" <div class=\"absolute right-0 bottom-0 w-5 h-5\"><img src=\"/images/editPhoto.svg\" alt=\"編輯大頭貼\"></div> <label for=\"photoUploadInput\" class=\"absolute left-0 top-0 w-full h-full pointer-events-none\"></label> <input type=\"file\" id=\"photoUploadInput\" accept=\"image/*\" class=\"hidden\">")], 2), _vm._ssrNode(" <div class=\"flex flex-col gap-2\"><h3 class=\"text-lg font-bold\">" + _vm._ssrEscape(_vm._s(_vm.memberInfo.name)) + "</h3> <p class=\"text-sm\">" + _vm._ssrEscape(_vm._s(_vm.memberInfo.cellphone)) + "</p></div>")], 2), _vm._ssrNode(" "), _vm._ssrNode("<div id=\"firstPos\">", "</div>", [_c('MemberGlobalCard', {
    attrs: {
      "height": 'min-h-[157px]',
      "px": 'px-2.5',
      "py": 'py-4',
      "data-aos": "fade-up",
      "data-aos-once": "true",
      "data-aos-duration": "300"
    }
  }, [_c('div', {
    staticClass: "w-full h-full relative",
    on: {
      "click": function ($event) {
        return _vm.$router.push('/member/appointmentRecord');
      }
    }
  }, [_c('h3', {
    pre: true,
    attrs: {
      "class": "text-sm font-bold"
    }
  }, [_vm._v("近期預約 :")]), _vm._v(" "), _vm.appointmentRecord.length !== 0 ? _c('div', [_c('div', {
    pre: true,
    attrs: {
      "class": "grid grid-cols-12 py-2 text-[#0B4395] relative after:content-[''] after:absolute after:bottom-0 after:-left-2.5 after:w-[calc(100%+20px)] after:border-b-2 after:border-b-[#aeaeae] after:border-dotted"
    }
  }, [_c('div', {
    pre: true,
    attrs: {
      "class": "col-span-6"
    }
  }, [_c('p', {
    pre: true,
    attrs: {
      "class": "text-sm"
    }
  }, [_vm._v("預約日期")])]), _vm._v(" "), _c('div', {
    pre: true,
    attrs: {
      "class": "col-span-3"
    }
  }, [_c('p', {
    pre: true,
    attrs: {
      "class": "text-sm"
    }
  }, [_vm._v("設計師")])]), _vm._v(" "), _c('div', {
    pre: true,
    attrs: {
      "class": "col-span-3"
    }
  }, [_c('p', {
    pre: true,
    attrs: {
      "class": "text-sm"
    }
  }, [_vm._v("狀態")])])]), _vm._v(" "), _vm._l(_vm.appointmentRecord, function (item, idx) {
    return _c('div', {
      key: item.id,
      staticClass: "grid grid-cols-12 py-2 gap-1 text-sm relative after:content-[''] after:absolute after:bottom-0 after:-left-2.5 after:w-[calc(100%+20px)] after:duration-300 after:border-b-2 after:border-b-[#aeaeae] after:border-dotted appointmentRecordList",
      class: {
        hidden: idx > 4
      }
    }, [_c('div', {
      staticClass: "col-span-6"
    }, [_c('p', {
      directives: [{
        name: "formatDate",
        rawName: "v-formatDate",
        value: 'time',
        expression: "'time'"
      }],
      staticClass: "text-sm line-clamp-1 break-all"
    }, [_vm._v("\n                  " + _vm._s(item.date) + "\n                ")])]), _vm._v(" "), _c('div', {
      staticClass: "col-span-3"
    }, [item.designer ? _c('p', {
      staticClass: "line-clamp-1 text-sm break-all"
    }, [_vm._v("\n                  " + _vm._s(item.designer.name) + "\n                  "), item.designer.nickName ? _c('span', [_vm._v("(" + _vm._s(item.designer.nickName) + ")")]) : _vm._e()]) : _c('p', {
      staticClass: "line-clamp-1 text-sm"
    }, [_vm._v("不指定")])]), _vm._v(" "), item.status !== '設計師已取消' ? _c('div', {
      staticClass: "col-span-3"
    }, [_c('p', {
      staticClass: "line-clamp-1 break-all text-sm",
      class: {
        'text-[#FEB401]': item.status === '待審核',
        'text-[#16A34A]': item.status === '預約成功'
      }
    }, [_vm._v("\n                  " + _vm._s(item.status) + "\n                ")])]) : _c('div', {
      staticClass: "col-span-3"
    }, [_c('p', {
      staticClass: "line-clamp-1 break-all text-sm text-[#F43F5E]"
    }, [_vm._v("\n                  已取消\n                ")])])]);
  })], 2) : _vm._e(), _vm._v(" "), _vm.appointmentRecord.length === 0 ? _c('p', {
    staticClass: "text-sm text-[#AEAEAE] mt-3"
  }, [_vm._v("\n            目前無預約\n          ")]) : _vm._e()]), _vm._v(" "), _c('div', {
    staticClass: "text-center mt-3",
    class: {
      'absolute bottom-5 left-1/2 -translate-x-1/2': _vm.appointmentRecord.length === 0
    },
    on: {
      "click": function ($event) {
        return _vm.$router.push('/member/appointmentRecord');
      }
    }
  }, [_c('p', {
    pre: true,
    attrs: {
      "class": "text-blue-400 text-sm"
    }
  }, [_vm._v("查看我的預約紀錄 >>")])])]), _vm._ssrNode(" "), _vm._l(_vm.menuList, function (item, idx) {
    return _c('MemberGlobalCard', {
      key: item.id,
      attrs: {
        "px": 'px-0',
        "py": 'py-0',
        "data-aos": "fade",
        "data-aos-once": "true",
        "data-aos-anchor": "#firstPos",
        "data-aos-delay": 200 + idx * 50,
        "data-aos-duration": "300"
      }
    }, [item.label !== '登出' && item.path ? _c('button', {
      staticClass: "text-sm py-4 px-6 flex gap-6 items-center w-full",
      attrs: {
        "data-mdb-ripple": "true",
        "data-mdb-ripple-color": "#AEAEAE",
        "type": "button"
      },
      on: {
        "click": function ($event) {
          return _vm.$router.push(`${item.path}`);
        }
      }
    }, [_c('fa', {
      staticClass: "text-xl",
      attrs: {
        "icon": item.icon
      }
    }), _vm._v(" "), _c('p', [_vm._v(_vm._s(item.label))])], 1) : _vm._e(), _vm._v(" "), item.label !== '登出' && item.url ? _c('button', {
      staticClass: "text-sm py-4 px-6 flex gap-6 items-center w-full",
      attrs: {
        "data-mdb-ripple": "true",
        "data-mdb-ripple-color": "#AEAEAE",
        "type": "button"
      },
      on: {
        "click": function ($event) {
          return _vm.openNewWindow(item.url);
        }
      }
    }, [_c('fa', {
      staticClass: "text-xl",
      attrs: {
        "icon": item.icon
      }
    }), _vm._v(" "), _c('p', [_vm._v(_vm._s(item.label))])], 1) : _vm._e(), _vm._v(" "), item.label === '登出' ? _c('button', {
      staticClass: "text-sm py-4 px-6 flex gap-6 items-center w-full",
      attrs: {
        "data-mdb-ripple": "true",
        "data-mdb-ripple-color": "#AEAEAE",
        "type": "button"
      },
      on: {
        "click": function ($event) {
          return _vm.logOut();
        }
      }
    }, [_c('fa', {
      staticClass: "text-xl",
      attrs: {
        "icon": item.icon
      }
    }), _vm._v(" "), _c('p', [_vm._v(_vm._s(item.label))])], 1) : _vm._e()]);
  })], 2)], 2) : _vm._e()]);
};
var staticRenderFns = [];

// CONCATENATED MODULE: ./pages/member/index.vue?vue&type=template&id=4e1966ac&

// EXTERNAL MODULE: ./plugins/cookies.js
var cookies = __webpack_require__(8);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/member/index.vue?vue&type=script&lang=js&

/* harmony default export */ var membervue_type_script_lang_js_ = ({
  name: "member-index",
  head() {
    return {
      meta: [{
        name: "theme-color",
        content: "#f1f1f1"
      }]
    };
  },
  data() {
    return {
      menuList: [{
        id: 1,
        label: "會員資料",
        icon: "fa-regular fa-user",
        path: "/member/info"
      }, {
        id: 2,
        label: "服務紀錄",
        icon: "fa-regular fa-sack-dollar",
        path: "/member/consumption"
      }, {
        id: 3,
        label: "我的卡券",
        icon: "fa-regular fa-ticket",
        path: "/member/ticket"
      },
      // {id: 4, label: '我的優惠券', icon: 'fa-solid fa-ticket', path: '/member/coupon'},
      {
        id: 5,
        label: "入金紀錄",
        icon: "fa-regular fa-circle-dollar",
        path: "/member/addValue"
      },
      // {id: 6, label: '紅利點數', icon: 'fa-regular fa-circle-p', path: '/member/point'},
      {
        id: 7,
        label: "偏好設定",
        icon: "fa-regular fa-heart",
        path: "/member/setting"
      }, {
        id: 8,
        label: "線上商城",
        icon: "fa-regular fa-bag-shopping"
      }, {
        id: 999,
        label: "服務滿意度調查",
        icon: "fa-regular fa-envelope"
      }, {
        id: 9,
        label: "登出",
        icon: "fa-regular fa-arrow-right-from-bracket"
      }],
      memberInfo: {},
      appointmentRecord: [],
      member: {
        imgUrl: ""
      },
      count: 0
    };
  },
  computed: {
    isLoading() {
      return this.$store.state.loading.isLoading;
    }
  },
  methods: {
    getShopUrl() {
      this.handleUrl("線上商城", "shopURL");
    },
    getRankingURL() {
      this.handleUrl("服務滿意度調查", "rankingURL");
    },
    handleUrl(label, itemName) {
      let url = '';
      const merchant = JSON.parse(localStorage.getItem("merchant"));
      switch (itemName) {
        case "shopURL":
          url = merchant ? merchant.shopURL : "";
          break;
        case "rankingURL":
          url = merchant ? merchant.rankingURL : "";
          break;
      }
      if (url === "" || url === null) {
        let newArray = this.menuList.filter(item => {
          return item.label != label;
        });
        this.menuList = newArray;
      } else {
        this.menuList.map(item => {
          if (item.label === label) item.url = url;
        });
      }
    },
    // 登出
    logOut() {
      this.$swal.fire({
        html: `<p class="text-lg text-[#232D4E] font-bold">確定要登出嗎?</p>`,
        showCancelButton: true,
        confirmButtonText: "登出",
        confirmButtonColor: "#232D4E",
        cancelButtonText: "取消"
      }).then(result => {
        if (result.isConfirmed) {
          Object(cookies["c" /* removeToken */])();
          window.localStorage.clear();
          this.$swal.fire({
            icon: "success",
            title: '<h3 class="text-2xl">會員已登出</h3>',
            background: "#fff",
            iconColor: "#FEB401",
            timer: 1500,
            showConfirmButton: false
          }).then(() => {
            // this.$cookieMethods.removeToken()
            this.$router.push("/");
            setTimeout(() => {
              location.reload();
            }, 100);
          });
        }
      });
    },
    async getMemberInfoAndRecored() {
      try {
        const recordNeedKey = "no, date, designer{name, nickName}, status";
        const [records, memberInfo] = await Promise.all([this.api.getAllCustomerReservationRecords(recordNeedKey), this.api.getCustomerPersonalData("name cellphone")]);
        if (memberInfo.hasError) {
          Object(cookies["c" /* removeToken */])();
          this.$router.push("/");
          return;
        }
        this.appointmentRecord = records.data.getCustomerReservationRecords.orders;
        this.memberInfo = memberInfo.data.getCustomerPersonalData;
        this.$store.dispatch("loading/isLoading", false);
      } catch (err) {
        console.log(err);
      }
    },
    // 上傳大頭貼
    uploadImg() {
      this.$swal.fire({
        icon: "warning",
        title: `<h3 class="text-2xl">功能尚未開放<br>Coming Soon</h3>`,
        background: "#fff",
        iconColor: "#FEB401",
        timer: 1500,
        showConfirmButton: false
      });
    },
    // TODO: 記得刪除
    showAlert() {
      this.$swal.fire({
        icon: "warning",
        title: `<h3 class="text-2xl">功能尚未開放<br>Coming Soon</h3>`,
        background: "#fff",
        iconColor: "#FEB401",
        timer: 1500,
        showConfirmButton: false
      });
    },
    openNewWindow(url) {
      window.open(url);
    }
  },
  mounted() {
    this.$store.dispatch("loading/isLoading", true);
    this.getMemberInfoAndRecored();
    this.getShopUrl();
    this.getRankingURL();
  }
});
// CONCATENATED MODULE: ./pages/member/index.vue?vue&type=script&lang=js&
 /* harmony default export */ var pages_membervue_type_script_lang_js_ = (membervue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(3);

// CONCATENATED MODULE: ./pages/member/index.vue



function injectStyles (context) {
  
  var style0 = __webpack_require__(53)
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  pages_membervue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  injectStyles,
  null,
  "ee957dba"
  
)

/* harmony default export */ var member = __webpack_exports__["default"] = (component.exports);

/* nuxt-component-imports */
installComponents(component, {MemberGlobalCard: __webpack_require__(43).default})


/***/ })

};;
//# sourceMappingURL=index.js.map