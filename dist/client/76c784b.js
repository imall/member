(window.webpackJsonp=window.webpackJsonp||[]).push([[26,6,7],{331:function(t,e,r){"use strict";r.r(e);var o={props:{isEdit:{type:Boolean,default:function(){return!1}},height:{type:String,default:function(){return"min-h-[40px]"}},py:{type:String,default:function(){return"py-3"}},px:{type:String,default:function(){return"px-3"}},my:{type:String,default:function(){return"mb-2.5"}},mx:{type:String,default:function(){return""}},customCss:{type:String,default:function(){return""}}},name:"MemberGlobalCard"},n=r(33),component=Object(n.a)(o,(function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"w-full bg-white rounded-md relative",class:[t.height,t.px,t.py,t.mx,t.my,t.customCss,{"shadow-[0px_0px_4px_1px_#F1FF99]":t.isEdit,"shadow-[0px_2px_2px_rgba(0,0,0,0.25)]":!t.isEdit}]},[t._t("default")],2)])}),[],!1,null,null,null);e.default=component.exports},334:function(t,e,r){"use strict";r.r(e);var o={name:"Modal",props:{showModal:{type:Boolean,default:function(){return!1}},isMemberRules:{type:Boolean,default:function(){return!1}},showCancelBtn:{type:Boolean,default:function(){return!0}}},data:function(){return{isShow:!1}},methods:{cancelModalEmit:function(t){this.$emit("cancelModal",t)}}},n=r(33),component=Object(n.a)(o,(function(){var t=this,e=t._self._c;return e("section",[e("transition",{attrs:{name:"fade"}},[t.showModal?e("div",{staticClass:"fixed w-screen h-screen bg-black opacity-25 top-0 left-0 z-40"}):t._e()]),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.showModal?e("div",{staticClass:"fixed w-full h-full top-0 left-0 px-[5%] flex justify-center items-center z-40 cancel shadow-[0px_2px_2px_rgba(0,0,0,0.25)]",on:{click:function(e){return t.cancelModalEmit(e)}}},[e("div",{staticClass:"w-full max-w-[768px] max-h-[80vh] overflow-y-auto bg-white rounded-md p-5 relative z-[-1]",attrs:{"data-aos":"flip-left","data-aos-duration":"400"}},[t.showCancelBtn?e("button",{staticClass:"absolute right-5 top-5 cancel",on:{click:function(e){return t.cancelModalEmit(e)}}},[e("fa",{staticClass:"text-3xl cancel",attrs:{icon:"fa-solid fa-xmark"},on:{click:function(e){return t.cancelModalEmit(e)}}})],1):t._e(),t._v(" "),t.isMemberRules?e("div",{staticClass:"flex justify-center items-center gap-1.5 mb-5 mt-10"},[e("fa",{staticClass:"text-xl",attrs:{icon:"fa-regular fa-circle-question"}}),t._v(" "),e("span",{staticClass:"text-lg font-bold"},[t._v("會籍說明")])],1):t._e(),t._v(" "),t._t("default")],2)]):t._e()])],1)}),[],!1,null,null,null);e.default=component.exports},363:function(t,e,r){"use strict";r.r(e);r(21),r(42),r(22),r(61),r(82);var o={name:"member-info",data:function(){return{memberCard:{},memberInfo:{},showMemberRules:!1,merchant:JSON.parse(window.localStorage.getItem("merchant"))||{id:""}}},computed:{isLoading:function(){return this.$store.state.loading.isLoading},itemIsLoading:function(){return this.$store.state.itemLoading.isLoading}},methods:{openMemberRules:function(){this.showMemberRules=!0},cancelModal:function(t){t.stopPropagation(),(Array.from(t.target.classList).includes("cancel")||"path"===t.target.nodeName)&&(this.showMemberRules=!1)},getCustomerPersonalData:function(){var t=this;this.$store.dispatch("loading/isLoading",!0);this.api.getCustomerPersonalData("name, cellphone, nickName, gender, email, lineId, birthday, address").then((function(e){t.memberInfo=e.data.getCustomerPersonalData,t.$store.dispatch("indexCache/handleSetUserInfo",e.data.getCustomerPersonalData),t.$store.dispatch("loading/isLoading",!1)})).catch((function(t){console.log(t)}))},customerMembershipRecord:function(){var t,e=this;this.$store.dispatch("itemLoading/isLoading",!0),this.api.customerMembershipRecord(null===(t=this.merchant)||void 0===t?void 0:t.id).then((function(t){t.data.customerMembershipRecord.unExpired[0]&&(-1===t.data.customerMembershipRecord.unExpired[0].membershipComment.indexOf("<p")&&-1===t.data.customerMembershipRecord.unExpired[0].membershipComment.indexOf("<img")?t.data.customerMembershipRecord.unExpired[0].isHtml=!1:t.data.customerMembershipRecord.unExpired[0].isHtml=!0,e.memberCard=t.data.customerMembershipRecord.unExpired[0]),e.$store.dispatch("itemLoading/isLoading",!1)})).catch((function(t){console.log(t)}))}},mounted:function(){this.getCustomerPersonalData(),this.customerMembershipRecord()}},n=r(33),component=Object(n.a)(o,(function(){var t=this,e=t._self._c;return e("section",{attrs:{id:"firstPos"}},[t.itemIsLoading?t._e():e("div",{staticClass:"w-full max-w-[500px] mb-3 mx-auto relative rounded-lg overflow-hidden aspect-video",attrs:{"data-aos":"fade-up","data-aos-duration":"300","data-aos-once":"true","data-aos-delay":"100","data-aos-anchor":"#firstPos"}},[t.memberCard.membershipImage?e("img",{staticClass:"w-full h-full shadow-md object-cover object-center",attrs:{src:t.memberCard.membershipImage}}):e("img",{staticClass:"w-full h-full shadow-md object-cover object-center",attrs:{src:"/images/member/card-bg.webp"}}),t._v(" "),t.memberCard.merchantname?e("span",{staticClass:"absolute left-3 bottom-3 text-base tracking-widest font-serif",style:"color: ".concat(t.memberCard.membershipTextCoclor)},[t._v(t._s(t.memberCard.merchantname))]):t._e(),t._v(" "),!t.memberCard.merchantname&&t.merchant.name?e("span",{staticClass:"absolute left-3 bottom-3 text-base tracking-widest font-serif text-white"},[t._v(t._s(t.merchant.name))]):t._e(),t._v(" "),e("div",{staticClass:"absolute right-3 bottom-3 flex items-center gap-1.5"},[t.memberCard.membershipTextCoclor?e("div",{staticClass:"flex items-center",style:"color: ".concat(t.memberCard.membershipTextCoclor)},[e("fa",{staticClass:"text-lg font-bold",attrs:{icon:"fa-regular fa-circle-question"}})],1):t._e(),t._v(" "),t.memberCard.membershipTextCoclor?e("span",{staticClass:"text-base tracking-widest font-serif",style:"color: ".concat(t.memberCard.membershipTextCoclor),on:{click:function(e){return t.openMemberRules()}}},[t._v("會籍說明")]):t._e()])]),t._v(" "),t.isLoading||t.itemIsLoading?t._e():e("MemberGlobalCard",{attrs:{"data-aos":"fade-up","data-aos-duration":"300","data-aos-once":"true","data-aos-delay":"200","data-aos-anchor":"#firstPos"}},[e("ul",{staticClass:"text-sm"},[e("li",{staticClass:"py-2 relative after:content-[''] after:w-[calc(100%+24px)] after:h-[1px] after:bg-[#aeaeae] after:absolute after:left-[-12px] after:bottom-0"},[e("div",{staticClass:"grid grid-cols-12"},[e("div",{pre:!0,attrs:{class:"col-span-3"}},[e("p",[t._v("姓名")])]),t._v(" "),e("div",{staticClass:"col-span-9"},[e("p",[t._v(t._s(t.memberInfo.name))])])])]),t._v(" "),e("li",{staticClass:"py-2 relative after:content-[''] after:w-[calc(100%+24px)] after:h-[1px] after:bg-[#aeaeae] after:absolute after:left-[-12px] after:bottom-0"},[e("div",{staticClass:"grid grid-cols-12"},[e("div",{pre:!0,attrs:{class:"col-span-3"}},[e("p",[t._v("電話")])]),t._v(" "),e("div",{staticClass:"col-span-9"},[e("p",[t._v(t._s(t.memberInfo.cellphone))])])])]),t._v(" "),e("li",{staticClass:"py-2 relative after:content-[''] after:w-[calc(100%+24px)] after:h-[1px] after:bg-[#aeaeae] after:absolute after:left-[-12px] after:bottom-0"},[e("div",{staticClass:"grid grid-cols-12"},[e("div",{pre:!0,attrs:{class:"col-span-3"}},[e("p",[t._v("暱稱")])]),t._v(" "),e("div",{staticClass:"col-span-9"},[e("p",[t._v(t._s(t.memberInfo.nickName))])])])]),t._v(" "),e("li",{staticClass:"py-2 relative after:content-[''] after:w-[calc(100%+24px)] after:h-[1px] after:bg-[#aeaeae] after:absolute after:left-[-12px] after:bottom-0"},[e("div",{staticClass:"grid grid-cols-12"},[e("div",{pre:!0,attrs:{class:"col-span-3"}},[e("p",[t._v("性別")])]),t._v(" "),e("div",{staticClass:"col-span-9"},["MALE"===t.memberInfo.gender?e("p",[t._v("男")]):t._e(),t._v(" "),"FEMALE"===t.memberInfo.gender?e("p",[t._v("女")]):t._e()])])]),t._v(" "),e("li",{staticClass:"py-2 relative after:content-[''] after:w-[calc(100%+24px)] after:h-[1px] after:bg-[#aeaeae] after:absolute after:left-[-12px] after:bottom-0"},[e("div",{staticClass:"grid grid-cols-12"},[e("div",{pre:!0,attrs:{class:"col-span-3"}},[e("p",[t._v("Email")])]),t._v(" "),e("div",{staticClass:"col-span-9"},[e("p",[t._v(t._s(t.memberInfo.email))])])])]),t._v(" "),e("li",{staticClass:"py-2 relative after:content-[''] after:w-[calc(100%+24px)] after:h-[1px] after:bg-[#aeaeae] after:absolute after:left-[-12px] after:bottom-0"},[e("div",{staticClass:"grid grid-cols-12"},[e("div",{pre:!0,attrs:{class:"col-span-3"}},[e("p",[t._v("Line ID")])]),t._v(" "),e("div",{staticClass:"col-span-9"},[e("p",[t._v(t._s(t.memberInfo.lineId))])])])]),t._v(" "),e("li",{staticClass:"py-2 relative after:content-[''] after:w-[calc(100%+24px)] after:h-[1px] after:bg-[#aeaeae] after:absolute after:left-[-12px] after:bottom-0"},[e("div",{staticClass:"grid grid-cols-12"},[e("div",{pre:!0,attrs:{class:"col-span-3"}},[e("p",[t._v("生日")])]),t._v(" "),e("div",{staticClass:"col-span-9"},[e("p",{directives:[{name:"formatDate",rawName:"v-formatDate",value:"date",expression:"'date'"}]},[t._v(t._s(t.memberInfo.birthday))])])])]),t._v(" "),e("li",{staticClass:"py-2"},[e("div",{staticClass:"grid grid-cols-12"},[e("div",{pre:!0,attrs:{class:"col-span-3"}},[e("p",[t._v("地址")])]),t._v(" "),e("div",{staticClass:"col-span-9"},[e("p",[t._v(t._s(t.memberInfo.address))])])])])])]),t._v(" "),t.isLoading||t.itemIsLoading?t._e():e("button",{staticClass:"w-full py-2.5 rounded-lg text-white text-lg bg-[#232D4E]",attrs:{"data-mdb-ripple":"true","data-mdb-ripple-color":"light","data-aos":"fade-up","data-aos-duration":"300","data-aos-once":"true","data-aos-delay":"300","data-aos-anchor":"#firstPos"},on:{click:function(e){return t.$router.push("/member/info/edit")}}},[t._v("修改個人資料")]),t._v(" "),e("Modal",{attrs:{showModal:t.showMemberRules,isMemberRules:!0},on:{cancelModal:function(e){return t.cancelModal(e)}}},[t.memberCard.isHtml?e("div",{domProps:{innerHTML:t._s(t.memberCard.membershipComment)}}):e("p",[t._v(t._s(t.memberCard.membershipComment))])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{MemberGlobalCard:r(331).default,Modal:r(334).default})}}]);