(window.webpackJsonp=window.webpackJsonp||[]).push([[25,6],{331:function(e,t,r){"use strict";r.r(t);var n={props:{isEdit:{type:Boolean,default:function(){return!1}},height:{type:String,default:function(){return"min-h-[40px]"}},py:{type:String,default:function(){return"py-3"}},px:{type:String,default:function(){return"px-3"}},my:{type:String,default:function(){return"mb-2.5"}},mx:{type:String,default:function(){return""}},customCss:{type:String,default:function(){return""}}},name:"MemberGlobalCard"},o=r(33),component=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("section",[t("div",{staticClass:"w-full bg-white rounded-md relative",class:[e.height,e.px,e.py,e.mx,e.my,e.customCss,{"shadow-[0px_0px_4px_1px_#F1FF99]":e.isEdit,"shadow-[0px_2px_2px_rgba(0,0,0,0.25)]":!e.isEdit}]},[e._t("default")],2)])}),[],!1,null,null,null);t.default=component.exports},364:function(e,t,r){"use strict";r.r(t);r(21);var n=r(13),o=(r(60),{name:"member-info-edit",data:function(){return{attributes:{content:"#FEB401"},memberInfo:{}}},computed:{isLoading:function(){return this.$store.state.loading.isLoading}},methods:{getCustomerPersonalData:function(){var e=this;this.$store.dispatch("loading/isLoading",!0);this.api.getCustomerPersonalData("name, cellphone, nickName, gender, email, lineId, birthday, address").then((function(t){e.memberInfo=t.data.getCustomerPersonalData,e.$store.dispatch("loading/isLoading",!1)})).catch((function(e){console.log(e)}))},customerSelfUpdate:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$store.dispatch("loading/isLoading",!0),r=JSON.parse(localStorage.getItem("isNewCustomer")),n=JSON.parse(localStorage.getItem("merchant")),o=n?n.id:null,l={name:e.memberInfo.name,nickName:e.memberInfo.nickName,gender:e.memberInfo.gender,email:e.memberInfo.email?e.memberInfo.email:"",lineId:e.memberInfo.lineId?e.memberInfo.lineId:"",birthday:e.memberInfo.birthday?new Date(e.memberInfo.birthday).getTime():null,address:e.memberInfo.address?e.memberInfo.address:""},t.next=7,e.api.customerSelfUpdate(l,"category");case 7:if(!t.sent.hasError){t.next=10;break}return t.abrupt("return");case 10:if(!r||!o){t.next=13;break}return t.next=13,e.api.applyCustomerPersoanlDataToMerchant({merchantId:o});case 13:e.$swal.fire({icon:"success",title:'<h3 class="text-2xl">編輯成功</h3>',background:"#fff",iconColor:"#FEB401",timer:1500,showConfirmButton:!1}).then((function(){o?e.$router.push("/member/appointment"):e.$router.push("/member/info")})),r&&localStorage.setItem("isNewCustomer",!1);case 15:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getCustomerPersonalData()}}),l=r(33),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return e.isLoading?e._e():t("section",{staticClass:"pb-14",attrs:{id:"firstPos"}},[t("MemberGlobalCard",{attrs:{py:"py-5",px:"px-5","data-aos":"fade-up","data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#firstPos"}},[t("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(r){var n=r.handleSubmit;return[t("form",{on:{submit:function(t){return t.preventDefault(),n(e.customerSelfUpdate)}}},[t("div",{staticClass:"grid grid-cols-12 items-center text-sm gap-2.5"},[t("ValidationProvider",{staticClass:"col-span-12",attrs:{name:"姓名",rules:"required|max:20"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t("div",{staticClass:"grid grid-cols-12 items-center"},[t("div",{pre:!0,attrs:{class:"col-span-3"}},[t("label",{pre:!0,attrs:{for:"nameInput"}},[t("p",[e._v("姓名"),t("sup",{pre:!0,attrs:{class:"ml-1",style:"color:red"}},[e._v("*")])])])]),e._v(" "),t("div",{staticClass:"col-span-8 relative"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.memberInfo.name,expression:"memberInfo.name"}],staticClass:"p-2.5 border border-[#aeaeae] rounded-lg w-full",class:{"ring-2 ring-[#ff4444]":n.length>0},attrs:{id:"nameInput",type:"text",maxlength:"20"},domProps:{value:e.memberInfo.name},on:{input:function(t){t.target.composing||e.$set(e.memberInfo,"name",t.target.value)}}})])])]}}],null,!0)}),e._v(" "),t("ValidationProvider",{staticClass:"col-span-12",attrs:{name:"手機",rules:"required|onlyNumber"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t("div",{staticClass:"grid grid-cols-12 items-center"},[t("div",{pre:!0,attrs:{class:"col-span-3"}},[t("label",{pre:!0,attrs:{for:"phoneInput"}},[t("p",[e._v("電話")])])]),e._v(" "),t("div",{staticClass:"col-span-8 relative"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.memberInfo.cellphone,expression:"memberInfo.cellphone"}],staticClass:"p-2.5 border border-[#aeaeae] rounded-lg w-full",class:{"ring-2 ring-[#ff4444]":n.length>0},attrs:{disabled:"",id:"phoneInput",type:"tel",maxlength:"10"},domProps:{value:e.memberInfo.cellphone},on:{input:function(t){t.target.composing||e.$set(e.memberInfo,"cellphone",t.target.value)}}})])])]}}],null,!0)}),e._v(" "),t("div",{pre:!0,attrs:{class:"col-span-3"}},[t("p",[e._v("暱稱")])]),e._v(" "),t("div",{staticClass:"col-span-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.memberInfo.nickName,expression:"memberInfo.nickName"}],staticClass:"p-2.5 border border-[#aeaeae] rounded-lg w-full focus:outline-2 focus:outline-[#232D4E]",attrs:{type:"text"},domProps:{value:e.memberInfo.nickName},on:{input:function(t){t.target.composing||e.$set(e.memberInfo,"nickName",t.target.value)}}})]),e._v(" "),t("div",{pre:!0,attrs:{class:"col-span-3 py-3"}},[t("p",[e._v("性別"),t("sup",{pre:!0,attrs:{class:"ml-1",style:"color:red"}},[e._v("*")])])]),e._v(" "),t("div",{staticClass:"col-span-8"},[t("ValidationProvider",{attrs:{rules:"oneOf:MALE,FEMALE",name:e.memberInfo.gender},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t("div",{staticClass:"flex items-center gap-7"},[t("div",{staticClass:"flex items-center gap-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.memberInfo.gender,expression:"memberInfo.gender"}],staticClass:"hidden",attrs:{type:"radio",id:"genderMale",value:"MALE"},domProps:{checked:e._q(e.memberInfo.gender,"MALE")},on:{change:function(t){return e.$set(e.memberInfo,"gender","MALE")}}}),e._v(" "),t("label",{staticClass:"w-[13px] h-[13px] rounded-full border border-[#aeaeae] p-[1px] relative after:content-[''] after:absolute after:w-[90%] after:h-[90%] after:left-[50%] after:translate-x-[-50%] after:top-[5%] after:rounded-full after:duration-300 after:scale-0",class:{"after:border-[3px] after:border-[#232D4E] after:scale-100":"MALE"===e.memberInfo.gender},attrs:{for:"genderMale"}}),e._v(" "),t("label",{attrs:{for:"genderMale"}},[e._v("男")])]),e._v(" "),t("div",{staticClass:"flex items-center gap-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.memberInfo.gender,expression:"memberInfo.gender"}],staticClass:"hidden",attrs:{type:"radio",id:"genderFemale",value:"FEMALE"},domProps:{checked:e._q(e.memberInfo.gender,"FEMALE")},on:{change:function(t){return e.$set(e.memberInfo,"gender","FEMALE")}}}),e._v(" "),t("label",{staticClass:"w-[13px] h-[13px] rounded-full border border-[#aeaeae] p-[1px] relative after:content-[''] after:absolute after:w-[90%] after:h-[90%] after:left-[50%] after:translate-x-[-50%] after:top-[5%] after:rounded-full after:duration-300 after:scale-0",class:{"after:border-[3px] after:border-[#232D4E] after:scale-100":"FEMALE"===e.memberInfo.gender},attrs:{for:"genderFemale"}}),e._v(" "),t("label",{attrs:{for:"genderFemale"}},[e._v("女")])]),e._v(" "),n.length>0?t("span",{staticClass:"text-red-500 font-bold"},[e._v("請輸入性別")]):e._e()])]}}],null,!0)})],1),e._v(" "),t("ValidationProvider",{staticClass:"col-span-12",attrs:{name:"email",rules:"email"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t("div",{staticClass:"grid grid-cols-12 items-center"},[t("div",{pre:!0,attrs:{class:"col-span-3"}},[t("label",{pre:!0,attrs:{for:"emailInput"}},[t("p",[e._v("Email")])])]),e._v(" "),t("div",{staticClass:"col-span-8 relative"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.memberInfo.email,expression:"memberInfo.email"}],staticClass:"p-2.5 border border-[#aeaeae] rounded-lg w-full",class:{"ring-2 ring-[#ff4444]":n.length>0},attrs:{id:"emailInput",type:"email"},domProps:{value:e.memberInfo.email},on:{input:function(t){t.target.composing||e.$set(e.memberInfo,"email",t.target.value)}}})])])]}}],null,!0)}),e._v(" "),t("div",{pre:!0,attrs:{class:"col-span-3"}},[t("p",[e._v("Line ID")])]),e._v(" "),t("div",{staticClass:"col-span-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.memberInfo.lineId,expression:"memberInfo.lineId"}],staticClass:"p-2.5 border border-[#aeaeae] rounded-lg w-full",attrs:{type:"text"},domProps:{value:e.memberInfo.lineId},on:{input:function(t){t.target.composing||e.$set(e.memberInfo,"lineId",t.target.value)}}})]),e._v(" "),t("div",{pre:!0,attrs:{class:"col-span-3"}},[t("p",[e._v("生日")])]),e._v(" "),t("div",{staticClass:"col-span-8"},[t("v-date-picker",{attrs:{locale:"zh-TW","first-day-of-week":2,mode:"date"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.inputEvents,o=r.inputValue;return[t("p",e._g({staticClass:"flex w-full p-3 justify-between items-center gap-3 border border-[#aeaeae] rounded-lg"},n),[t("span",{directives:[{name:"formatDate",rawName:"v-formatDate",value:"date",expression:"'date'"}]},[e._v(e._s(o))]),e._v(" "),t("fa",{staticClass:"text-base",attrs:{icon:"fa-solid fa-calendar-days"}})],1)]}}],null,!0),model:{value:e.memberInfo.birthday,callback:function(t){e.$set(e.memberInfo,"birthday",t)},expression:"memberInfo.birthday"}})],1),e._v(" "),t("div",{pre:!0,attrs:{class:"col-span-3"}},[t("p",[e._v("地址")])]),e._v(" "),t("div",{staticClass:"col-span-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.memberInfo.address,expression:"memberInfo.address"}],staticClass:"p-2.5 border border-[#aeaeae] rounded-lg w-full focus:outline-2 focus:outline-[#232D4E]",attrs:{type:"text"},domProps:{value:e.memberInfo.address},on:{input:function(t){t.target.composing||e.$set(e.memberInfo,"address",t.target.value)}}})])],1),e._v(" "),e._m(0)])]}}],null,!1,3179619232)})],1)],1)}),[function(){return(0,this._self._c)("button",{staticClass:"w-full py-2.5 rounded-lg text-white text-lg bg-[#232D4E] absolute left-0 -bottom-16",attrs:{type:"submit","data-mdb-ripple":"true","data-mdb-ripple-color":"light","data-aos":"fade-up","data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#firstPos","data-aos-delay":"200"}},[this._v("\n          儲存修改\n        ")])}],!1,null,null,null);t.default=component.exports;installComponents(component,{MemberGlobalCard:r(331).default})}}]);