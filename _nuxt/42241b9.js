(window.webpackJsonp=window.webpackJsonp||[]).push([[21,4],{332:function(t,e,n){"use strict";n.r(e);var r={computed:{isLoading:function(){return this.$store.state.itemLoading.isLoading}}},o=n(33),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("section",[e("transition",{attrs:{name:"fade"}},[t.isLoading?e("div",{staticClass:"w-full min-h-[100px] flex items-center justify-center pointer-events-none z-50"},[e("div",{staticClass:"border-[5px] border-[#e2e2e2] border-t-[5px] border-t-[#232D4E] rounded-full w-10 h-10 animate-spin-slow"})]):t._e()])],1)}),[],!1,null,null,null);e.default=component.exports},360:function(t,e,n){"use strict";n.r(e);n(21);var r=n(13),o=(n(60),n(11),n(35),n(25),{name:"member-consumption",head:function(){return{meta:[{name:"theme-color",content:"#ffffff"}]}},data:function(){return{orders:[],totalPage:0,currentPage:0,isGetting:!1,isEnd:!1}},computed:{isLoading:function(){return this.$store.state.loading.isLoading}},methods:{getRecords:function(){var t=this;this.$store.dispatch("loading/isLoading",!0),this.$api.getCustomerConsumptionRecords(this.currentPage).then((function(e){(t.totalPage=Math.ceil(e.data.getCustomerConsumptionRecords.totalCount/20),t.totalPage<=1&&(t.isEnd=!0),t.totalPage>1)&&document.querySelector(".member__container").addEventListener("scroll",t.scrollGetRecords);t.orders=e.data.getCustomerConsumptionRecords.orders,t.$store.dispatch("loading/isLoading",!1)})).catch((function(t){console.log(t)}))},scrollGetRecords:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.querySelector("#orderList"),200,r=n.getBoundingClientRect().bottom-window.innerHeight,t.isGetting||t.isEnd||!(r<200)){e.next=11;break}return t.$store.dispatch("itemLoading/isLoading",!0),t.isGetting=!0,t.isEnd=!1,t.currentPage++,t.currentPage===t.totalPage-1&&(t.isEnd=!0,null==(o=document.querySelector(".member__container"))||o.removeEventListener("scroll",t.scrollGetRecords)),e.next=11,t.$api.getCustomerConsumptionRecords(t.currentPage).then((function(e){e.data.getCustomerConsumptionRecords.orders.forEach((function(t){var e=new Date(t.date),n="".concat(e.getFullYear(),"/").concat(e.getMonth()+1,"/").concat(e.getDate());t.dateFormat=n})),t.orders=t.orders.concat(e.data.getCustomerConsumptionRecords.orders),t.isGetting=!1,t.$store.dispatch("itemLoading/isLoading",!1)})).catch((function(e){t.isGetting=!1,console.log(e)}));case 11:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getRecords()},beforeDestroy:function(){var t=document.querySelector(".member__container");t&&(null==t||t.removeEventListener("scroll",this.scrollGetRecords))}}),c=n(33),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("section",{staticClass:"w-full max-w-[768px] mx-auto",attrs:{id:"firstPos"}},[t._m(0),t._v(" "),t.orders.length>0&&!t.isLoading?e("ul",{staticClass:"rounded-md shadow-md bg-white mt-3 text-sm",attrs:{id:"orderList","data-aos":"fade-up","data-aos-duration":"300","data-aos-once":"true"}},t._l(t.orders,(function(n,r){return e("li",{key:n.id,staticClass:"py-4 px-6",class:{"border-b border-[#aeaeae]":r+1!==t.orders.length},attrs:{"data-aos":"fade","data-aos-delay":"200","data-aos-once":"true","data-aos-duration":"400","data-aos-anchor":"#firstPos"}},[e("div",{staticClass:"grid grid-cols-12 items-center gap-4"},[t._m(1,!0),t._v(" "),e("div",{staticClass:"col-span-7"},[e("p",[t._v(t._s(n.no))])]),t._v(" "),t._m(2,!0),t._v(" "),e("div",{staticClass:"col-span-7"},[e("p",{directives:[{name:"formatDate",rawName:"v-formatDate",value:"time",expression:"'time'"}]},[t._v(t._s(n.date))])]),t._v(" "),t._m(3,!0),t._v(" "),e("div",{staticClass:"col-span-7"},[n.designer?e("p",{staticClass:"line-clamp-1"},[t._v(t._s(n.designer.name)+" "),n.designer.nickName?e("span",[t._v("("+t._s(n.designer.nickName)+")")]):t._e()]):e("p",[t._v("不指定")])]),t._v(" "),t._m(4,!0),t._v(" "),e("div",{staticClass:"col-span-7"},[n.isDesignate?e("p",[t._v("Y")]):e("p",[t._v("N")])]),t._v(" "),t._m(5,!0),t._v(" "),e("div",{staticClass:"col-span-7 flex items-center gap-2"},[e("p",{staticClass:"text-[#FEB401] text-lg font-bold"},[t._v("$"+t._s(n.serviceFakeTotal))])]),t._v(" "),t._m(6,!0),t._v(" "),e("div",{staticClass:"col-span-7 flex items-center gap-2"},[e("p",{staticClass:"text-[#FEB401] text-lg font-bold"},[t._v("$"+t._s(n.productFakeTotal))])]),t._v(" "),t._m(7,!0),t._v(" "),e("div",{staticClass:"col-span-7 flex items-center gap-2"},[e("p",{staticClass:"text-[#FEB401] text-lg font-bold"},[t._v("$"+t._s(n.ticketSellIntoPerformance+n.ticketSellNotIntoPerformance))])]),t._v(" "),t._m(8,!0),t._v(" "),e("div",{staticClass:"col-span-7 flex items-center gap-2"},[e("p",{staticClass:"text-[#FEB401] text-lg font-bold"},[t._v("$"+t._s(n.useTicketTotal))])]),t._v(" "),t._m(9,!0),t._v(" "),e("div",{staticClass:"col-span-7 flex items-center gap-2"},[e("p",{staticClass:"text-[#FEB401] text-lg font-bold"},[t._v("$"+t._s(n.membershipFakeTotal))])]),t._v(" "),t._m(10,!0),t._v(" "),e("div",{staticClass:"col-span-7 flex items-center gap-2"},[e("p",{staticClass:"text-[#FEB401] text-lg font-bold"},[t._v("$"+t._s(n.businessCash))])])])])})),0):t._e(),t._v(" "),e("ItemLoading"),t._v(" "),0!==t.orders.length||t.isLoading?t._e():e("ul",{staticClass:"rounded-md min-h-[200px] shadow-md bg-white mt-3 text-sm flex items-center justify-center",attrs:{"data-aos":"zoom-in","data-aos-duration":"300"}},[t._m(11)])],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"fixed left-0 top-0 w-full px-[10%] text-lg bg-white py-4 flex items-center"},[e("fa",{staticClass:"text-2xl",attrs:{icon:"fa-solid fa-angle-left"},on:{click:function(e){return t.$router.push("/member")}}}),t._v(" "),e("h2",{pre:!0,attrs:{class:"absolute top-1/2 translate-y-[-50%] left-[50%] translate-x-[-50%] text-lg font-bold"}},[t._v("服務記錄")])],1)},function(){var t=this._self._c;return t("div",{pre:!0,attrs:{class:"col-span-5"}},[t("p",[this._v("帳單編號")])])},function(){var t=this._self._c;return t("div",{pre:!0,attrs:{class:"col-span-5"}},[t("p",[this._v("帳單時間")])])},function(){var t=this._self._c;return t("div",{pre:!0,attrs:{class:"col-span-5"}},[t("p",[this._v("設計師")])])},function(){var t=this._self._c;return t("div",{pre:!0,attrs:{class:"col-span-5"}},[t("p",[this._v("指定")])])},function(){var t=this._self._c;return t("div",{pre:!0,attrs:{class:"col-span-5"}},[t("p",[this._v("服務消費")])])},function(){var t=this._self._c;return t("div",{pre:!0,attrs:{class:"col-span-5"}},[t("p",[this._v("店販消費")])])},function(){var t=this._self._c;return t("div",{pre:!0,attrs:{class:"col-span-5"}},[t("p",[this._v("預收卡販賣")])])},function(){var t=this._self._c;return t("div",{pre:!0,attrs:{class:"col-span-5"}},[t("p",[this._v("預收卡使用")])])},function(){var t=this._self._c;return t("div",{pre:!0,attrs:{class:"col-span-5"}},[t("p",[this._v("會員卡販賣")])])},function(){var t=this._self._c;return t("div",{pre:!0,attrs:{class:"col-span-5"}},[t("p",[this._v("實際支付現金")])])},function(){var t=this._self._c;return t("li",{pre:!0},[t("p",[this._v("目前尚無紀錄")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{ItemLoading:n(332).default})}}]);