(window.webpackJsonp=window.webpackJsonp||[]).push([[23,6],{331:function(t,e,n){"use strict";n.r(e);var r={props:{isEdit:{type:Boolean,default:function(){return!1}},height:{type:String,default:function(){return"min-h-[40px]"}},py:{type:String,default:function(){return"py-3"}},px:{type:String,default:function(){return"px-3"}},my:{type:String,default:function(){return"mb-2.5"}},mx:{type:String,default:function(){return""}},customCss:{type:String,default:function(){return""}}},name:"MemberGlobalCard"},l=n(33),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"w-full bg-white rounded-md relative",class:[t.height,t.px,t.py,t.mx,t.my,t.customCss,{"shadow-[0px_0px_4px_1px_#F1FF99]":t.isEdit,"shadow-[0px_2px_2px_rgba(0,0,0,0.25)]":!t.isEdit}]},[t._t("default")],2)])}),[],!1,null,null,null);e.default=component.exports},333:function(t,e,n){t.exports=n.p+"img/insideLogo.85c1f01.svg"},335:function(t,e,n){var content=n(342);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(100).default)("39465c24",content,!1,{sourceMap:!1})},341:function(t,e,n){"use strict";n(335)},342:function(t,e,n){var r=n(99)((function(i){return i[1]}));r.push([t.i,".newsTicker{animation:newsTickerAnimate 25s linear infinite}@keyframes newsTickerAnimate{0%{left:100%;transform:translateX(0)}to{left:0;transform:translateX(-100%)}}",""]),r.locals={},t.exports=r},352:function(t,e,n){"use strict";n.r(e);n(21);var r=[function(){var t=this._self._c;return t("header",{staticClass:"w-full pb-4 fixed top-5 left-0 z-10"},[t("div",{staticClass:"w-full mx-auto flex items-center gap-2 px-[5%]"},[t("h1",[t("img",{attrs:{src:n(333),alt:"bos客戶預約系統"}})])])])},function(){var t=this._self._c;return t("div",{staticClass:"absolute right-0 bottom-0 w-5 h-5"},[t("img",{attrs:{src:"/images/editPhoto.svg",alt:"編輯大頭貼"}})])}],l=n(30),o=n(13),c=(n(60),n(50),n(11),n(62),n(59),n(22),n(26),n(47)),f={name:"member-index",head:function(){return{meta:[{name:"theme-color",content:"#f1f1f1"}]}},data:function(){return{menuList:[{id:1,label:"會員資料",icon:"fa-regular fa-user",path:"/member/info"},{id:2,label:"服務紀錄",icon:"fa-regular fa-sack-dollar",path:"/member/consumption"},{id:3,label:"我的卡券",icon:"fa-regular fa-ticket",path:"/member/ticket"},{id:5,label:"入金紀錄",icon:"fa-regular fa-circle-dollar",path:"/member/addValue"},{id:7,label:"偏好設定",icon:"fa-regular fa-heart",path:"/member/setting"},{id:8,label:"線上商城",icon:"fa-regular fa-bag-shopping"},{id:999,label:"服務滿意度調查",icon:"fa-regular fa-envelope"},{id:9,label:"登出",icon:"fa-regular fa-arrow-right-from-bracket"}],memberInfo:{},appointmentRecord:[],member:{imgUrl:""},count:0}},computed:{isLoading:function(){return this.$store.state.loading.isLoading}},methods:{getShopUrl:function(){this.handleUrl("線上商城","shopURL")},getRankingURL:function(){this.handleUrl("服務滿意度調查","rankingURL")},handleUrl:function(label,t){var e="",n=JSON.parse(localStorage.getItem("merchant"));switch(t){case"shopURL":e=n?n.shopURL:"";break;case"rankingURL":e=n?n.rankingURL:""}if(""===e||null===e){var r=this.menuList.filter((function(t){return t.label!=label}));this.menuList=r}else this.menuList.map((function(t){t.label===label&&(t.url=e)}))},logOut:function(){var t=this;this.$swal.fire({html:'<p class="text-lg text-[#232D4E] font-bold">確定要登出嗎?</p>',showCancelButton:!0,confirmButtonText:"登出",confirmButtonColor:"#232D4E",cancelButtonText:"取消"}).then((function(e){e.isConfirmed&&(Object(c.c)(),window.localStorage.clear(),t.$swal.fire({icon:"success",title:'<h3 class="text-2xl">會員已登出</h3>',background:"#fff",iconColor:"#FEB401",timer:1500,showConfirmButton:!1}).then((function(){t.$router.push("/"),setTimeout((function(){location.reload()}),100)})))}))},getMemberInfoAndRecored:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"no, date, designer{name, nickName}, status",e.next=4,Promise.all([t.api.getAllCustomerReservationRecords("no, date, designer{name, nickName}, status"),t.api.getCustomerPersonalData("name cellphone")]);case 4:if(n=e.sent,r=Object(l.a)(n,2),o=r[0],!(f=r[1]).hasError){e.next=12;break}return Object(c.c)(),t.$router.push("/"),e.abrupt("return");case 12:t.appointmentRecord=o.data.getCustomerReservationRecords.orders,t.memberInfo=f.data.getCustomerPersonalData,t.$store.dispatch("loading/isLoading",!1),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()},uploadImg:function(){this.$swal.fire({icon:"warning",title:'<h3 class="text-2xl">功能尚未開放<br>Coming Soon</h3>',background:"#fff",iconColor:"#FEB401",timer:1500,showConfirmButton:!1})},showAlert:function(){this.$swal.fire({icon:"warning",title:'<h3 class="text-2xl">功能尚未開放<br>Coming Soon</h3>',background:"#fff",iconColor:"#FEB401",timer:1500,showConfirmButton:!1})},openNewWindow:function(t){window.open(t)}},mounted:function(){this.$store.dispatch("loading/isLoading",!0),this.getMemberInfoAndRecored(),this.getShopUrl(),this.getRankingURL()}},d=(n(341),n(33)),component=Object(d.a)(f,(function(){var t=this,e=t._self._c;return e("div",[t.isLoading?t._e():e("section",{staticClass:"w-full max-w-[768px] mx-auto"},[t._m(0),t._v(" "),e("div",{staticClass:"flex items-center gap-4 mb-4"},[e("div",{staticClass:"w-[90px] h-[90px] relative rounded-full",class:{"bg-[#AEAEAE] flex justify-center items-center":!t.member.imgUrl},on:{click:function(e){return t.uploadImg()}}},[t.member.imgUrl?e("img",{staticClass:"w-full h-full object-cover rounded-full",attrs:{src:t.member.imgUrl,alt:t.member.name}}):e("fa",{staticClass:"text-white text-4xl",attrs:{icon:"fa-regular fa-user"}}),t._v(" "),t._m(1),t._v(" "),e("label",{staticClass:"absolute left-0 top-0 w-full h-full pointer-events-none",attrs:{for:"photoUploadInput"}}),t._v(" "),e("input",{staticClass:"hidden",attrs:{type:"file",id:"photoUploadInput",accept:"image/*"}})],1),t._v(" "),e("div",{staticClass:"flex flex-col gap-2"},[e("h3",{staticClass:"text-lg font-bold"},[t._v(t._s(t.memberInfo.name))]),t._v(" "),e("p",{staticClass:"text-sm"},[t._v(t._s(t.memberInfo.cellphone))])])]),t._v(" "),e("div",{attrs:{id:"firstPos"}},[e("MemberGlobalCard",{attrs:{height:"min-h-[157px]",px:"px-2.5",py:"py-4","data-aos":"fade-up","data-aos-once":"true","data-aos-duration":"300"}},[e("div",{staticClass:"w-full h-full relative",on:{click:function(e){return t.$router.push("/member/appointmentRecord")}}},[e("h3",{pre:!0,attrs:{class:"text-sm font-bold"}},[t._v("近期預約 :")]),t._v(" "),0!==t.appointmentRecord.length?e("div",[e("div",{pre:!0,attrs:{class:"grid grid-cols-12 py-2 text-[#0B4395] relative after:content-[''] after:absolute after:bottom-0 after:-left-2.5 after:w-[calc(100%+20px)] after:border-b-2 after:border-b-[#aeaeae] after:border-dotted"}},[e("div",{pre:!0,attrs:{class:"col-span-6"}},[e("p",{pre:!0,attrs:{class:"text-sm"}},[t._v("預約日期")])]),t._v(" "),e("div",{pre:!0,attrs:{class:"col-span-3"}},[e("p",{pre:!0,attrs:{class:"text-sm"}},[t._v("設計師")])]),t._v(" "),e("div",{pre:!0,attrs:{class:"col-span-3"}},[e("p",{pre:!0,attrs:{class:"text-sm"}},[t._v("狀態")])])]),t._v(" "),t._l(t.appointmentRecord,(function(n,r){return e("div",{key:n.id,staticClass:"grid grid-cols-12 py-2 gap-1 text-sm relative after:content-[''] after:absolute after:bottom-0 after:-left-2.5 after:w-[calc(100%+20px)] after:duration-300 after:border-b-2 after:border-b-[#aeaeae] after:border-dotted appointmentRecordList",class:{hidden:r>4}},[e("div",{staticClass:"col-span-6"},[e("p",{directives:[{name:"formatDate",rawName:"v-formatDate",value:"time",expression:"'time'"}],staticClass:"text-sm line-clamp-1 break-all"},[t._v("\n                  "+t._s(n.date)+"\n                ")])]),t._v(" "),e("div",{staticClass:"col-span-3"},[n.designer?e("p",{staticClass:"line-clamp-1 text-sm break-all"},[t._v("\n                  "+t._s(n.designer.name)+"\n                  "),n.designer.nickName?e("span",[t._v("("+t._s(n.designer.nickName)+")")]):t._e()]):e("p",{staticClass:"line-clamp-1 text-sm"},[t._v("不指定")])]),t._v(" "),"設計師已取消"!==n.status?e("div",{staticClass:"col-span-3"},[e("p",{staticClass:"line-clamp-1 break-all text-sm",class:{"text-[#FEB401]":"待審核"===n.status,"text-[#16A34A]":"預約成功"===n.status}},[t._v("\n                  "+t._s(n.status)+"\n                ")])]):e("div",{staticClass:"col-span-3"},[e("p",{staticClass:"line-clamp-1 break-all text-sm text-[#F43F5E]"},[t._v("\n                  已取消\n                ")])])])}))],2):t._e(),t._v(" "),0===t.appointmentRecord.length?e("p",{staticClass:"text-sm text-[#AEAEAE] mt-3"},[t._v("\n            目前無預約\n          ")]):t._e()]),t._v(" "),e("div",{staticClass:"text-center mt-3",class:{"absolute bottom-5 left-1/2 -translate-x-1/2":0===t.appointmentRecord.length},on:{click:function(e){return t.$router.push("/member/appointmentRecord")}}},[e("p",{pre:!0,attrs:{class:"text-blue-400 text-sm"}},[t._v("查看我的預約紀錄 >>")])])]),t._v(" "),t._l(t.menuList,(function(n,r){return e("MemberGlobalCard",{key:n.id,attrs:{px:"px-0",py:"py-0","data-aos":"fade","data-aos-once":"true","data-aos-anchor":"#firstPos","data-aos-delay":200+50*r,"data-aos-duration":"300"}},["登出"!==n.label&&n.path?e("button",{staticClass:"text-sm py-4 px-6 flex gap-6 items-center w-full",attrs:{"data-mdb-ripple":"true","data-mdb-ripple-color":"#AEAEAE",type:"button"},on:{click:function(e){return t.$router.push("".concat(n.path))}}},[e("fa",{staticClass:"text-xl",attrs:{icon:n.icon}}),t._v(" "),e("p",[t._v(t._s(n.label))])],1):t._e(),t._v(" "),"登出"!==n.label&&n.url?e("button",{staticClass:"text-sm py-4 px-6 flex gap-6 items-center w-full",attrs:{"data-mdb-ripple":"true","data-mdb-ripple-color":"#AEAEAE",type:"button"},on:{click:function(e){return t.openNewWindow(n.url)}}},[e("fa",{staticClass:"text-xl",attrs:{icon:n.icon}}),t._v(" "),e("p",[t._v(t._s(n.label))])],1):t._e(),t._v(" "),"登出"===n.label?e("button",{staticClass:"text-sm py-4 px-6 flex gap-6 items-center w-full",attrs:{"data-mdb-ripple":"true","data-mdb-ripple-color":"#AEAEAE",type:"button"},on:{click:function(e){return t.logOut()}}},[e("fa",{staticClass:"text-xl",attrs:{icon:n.icon}}),t._v(" "),e("p",[t._v(t._s(n.label))])],1):t._e()])}))],2)])])}),r,!1,null,null,null);e.default=component.exports;installComponents(component,{MemberGlobalCard:n(331).default})}}]);