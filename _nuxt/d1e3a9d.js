(window.webpackJsonp=window.webpackJsonp||[]).push([[18,2],{337:function(t,e,n){"use strict";n.r(e);n(235),n(11),n(59);var r={props:{disabledDate:{type:Array,default:function(){return[]}},filterOldDay:{type:Boolean,default:function(){return!1}},isGettingDate:{type:Boolean,default:function(){return!0}}},data:function(){return{year:(new Date).getFullYear(),month:(new Date).getMonth(),date:(new Date).getDate(),selectDate:"",isShow:!0}},computed:{monthInDays:function(){return new Date(this.year,this.month+1,0).getDate()},monthFirstDay:function(){return new Date(this.year,this.month,1).getDay()},designerId:function(){return this.$store.state.appointmentData.designerId}},methods:{filterOldDate:function(t){var e=new Date;return new Date(this.year,this.month,t)<new Date(e.getFullYear(),e.getMonth(),e.getDate())},filterDayOffDate:function(t){var e=new Date(this.year,this.month,t).getTime();return this.disabledDate.find((function(t){return t===e}))},changeMonth:function(t){t?(this.year++,this.month=0):(this.year--,this.month=11)},changeMonthAnimation:function(){var t=this;this.isShow=!1,setTimeout((function(){t.isShow=!0}),300),this.$emit("changeMonth",new Date(this.year,this.month))},isToday:function(t){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()===new Date(this.year,this.month,t).getTime()},filterSelectedDate:function(t){return new Date(this.year,this.month,t).getTime()===this.selectDate},handleSelectDate:function(t){this.selectDate=new Date(this.year,this.month,t).getTime(),this.$emit("selectDate",this.selectDate)}},mounted:function(){var t=this;this.disabledDate.find((function(e){return e===new Date(t.year,t.month,t.date).getTime()}))||(this.selectDate=new Date(this.year,this.month,this.date).getTime(),this.$emit("selectDate",this.selectDate))}},o=n(33),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"w-full bg-white p-4 rounded-lg border border-[#aeaeae] shadow-[0px_2px_2px_rgba(0,0,0,0.25)]"},[e("div",{staticClass:"flex justify-between items-center"},[e("fa",{staticClass:"p-4",attrs:{icon:"fa-solid fa-angle-left"},on:{click:function(e){0===t.month?t.changeMonth(!1):t.month--,t.changeMonthAnimation()}}}),t._v(" "),e("div",{staticClass:"flex items-end gap-2"},[e("p",{staticClass:"font-bold"},[t._v(t._s(t.year-1911)+"年")]),t._v(" "),e("p",{staticClass:"text-2xl font-bold"},[t._v(t._s(t.month+1)+"月")])]),t._v(" "),e("fa",{staticClass:"p-4",attrs:{icon:"fa-solid fa-angle-right"},on:{click:function(e){11===t.month?t.changeMonth(!0):t.month++,t.changeMonthAnimation()}}})],1),t._v(" "),t._m(0),t._v(" "),1!==t.designerId?e("div",[t.isShow&&!t.isGettingDate?e("div",{staticClass:"grid grid-cols-7 text-center"},[t._l(t.monthFirstDay,(function(t){return e("div",{key:t+"pushDay",staticClass:"col-span-1 py-2"})})),t._v(" "),t._l(t.monthInDays,(function(n){return e("div",{key:n+"day",staticClass:"col-span-1 py-2 rounded-full duration-300 relative z-10 after:content-[''] after:z-[-1] after:absolute after:top-1/2 after:left-1/2 after:-translate-x-1/2 after:-translate-y-1/2 after:w-10 after:h-10 after:scale-0 after:bg-[#FEB401] after:rounded-full after:duration-300",class:{"text-[#aeaeae] pointer-events-none":t.filterOldDate(n)||t.filterDayOffDate(n),"text-[#FEB401]":t.isToday(n),"after:scale-100 text-[#fff]":t.filterSelectedDate(n)},on:{click:function(e){return t.handleSelectDate(n)}}},[t._v("\n          "+t._s(n)+"\n        ")])}))],2):t._e(),t._v(" "),t.isGettingDate?e("div",{staticClass:"w-full min-h-[150px] flex items-center justify-center"},[e("div",{staticClass:"border-4 border-t-[#232D4E] rounded-full w-10 h-10 animate-spin-slow"})]):t._e()]):e("div",[e("transition",[t.isShow&&!t.isGettingDate?e("div",{staticClass:"grid grid-cols-7 text-center"},[t._l(t.monthFirstDay,(function(t){return e("div",{key:t+"pushDay",staticClass:"col-span-1 py-2"})})),t._v(" "),t._l(t.monthInDays,(function(n){return e("div",{key:n+"day",staticClass:"col-span-1 py-2 rounded-full duration-300 relative z-10 after:content-[''] after:z-[-1] after:absolute after:top-1/2 after:left-1/2 after:-translate-x-1/2 after:-translate-y-1/2 after:w-10 after:h-10 after:scale-0 after:bg-[#FEB401] after:rounded-full after:duration-300",class:{"text-[#aeaeae] pointer-events-none":t.filterOldDate(n)||t.filterDayOffDate(n),"text-[#FEB401]":t.isToday(n),"after:scale-100 text-[#fff]":t.filterSelectedDate(n)},on:{click:function(e){return t.handleSelectDate(n)}}},[t._v("\n            "+t._s(n)+"\n          ")])}))],2):t._e()])],1)])])}),[function(){var t=this,e=t._self._c;return e("div",{pre:!0,attrs:{class:"grid grid-cols-7 text-center"}},[e("div",{pre:!0,attrs:{class:"col-span-1 py-2"}},[t._v("日")]),t._v(" "),e("div",{pre:!0,attrs:{class:"col-span-1 py-2"}},[t._v("一")]),t._v(" "),e("div",{pre:!0,attrs:{class:"col-span-1 py-2"}},[t._v("二")]),t._v(" "),e("div",{pre:!0,attrs:{class:"col-span-1 py-2"}},[t._v("三")]),t._v(" "),e("div",{pre:!0,attrs:{class:"col-span-1 py-2"}},[t._v("四")]),t._v(" "),e("div",{pre:!0,attrs:{class:"col-span-1 py-2"}},[t._v("五")]),t._v(" "),e("div",{pre:!0,attrs:{class:"col-span-1 py-2"}},[t._v("六")])])}],!1,null,null,null);e.default=component.exports},357:function(t,e,n){"use strict";n.r(e);var r=n(13),o=(n(60),n(25),n(11),n(35),n(235),n(79),{name:"appointment-selectDate",data:function(){return{disabledDate:[],userSelect:{date:"",time:""},isGettingDate:!1,bookingDate:[],bookingTimes:[],selectRange:"早上",morningRange:[],afterNoonRange:[],nightRange:[]}},computed:{isDesignation:function(){return this.$store.state.appointmentData.designerId},isLoading:function(){return this.$store.state.loading.isLoading},selectDesigner:function(){return this.$store.state.appointmentData.designerName},selectDesignerNickName:function(){return this.$store.state.appointmentData.designerNickName},filterTimeRange:function(){switch(this.selectRange){case"早上":return this.morningRange;case"下午":return this.afterNoonRange;case"晚上":return this.nightRange}}},methods:{getMonthRange:function(t,e){var n=new Date(t,e,1).getTime(),r=new Date(t,e+1,1).getTime();return"".concat(n,", ").concat(r)},getDesignerBookingTimesWithRange:function(input){var t=this;if(!this.$store.state.appointmentData.merchantId||!this.$store.state.appointmentData.designerId)return this.$store.dispatch("loading/isLoading",!1),void this.$router.push("/member/appointment");this.disabledDate=[],this.api.getDesignerBookingTimesWithRange(input).then((function(e){e.data.getDesignerBookingTimesWithRange.forEach((function(e){e.isRegularHoliday?t.disabledDate.push(e.date):t.bookingDate.push(e)})),t.$store.dispatch("loading/isLoading",!1),t.isGettingDate=!1})).catch((function(t){console.log(t)}))},changeMonth:function(t){if(1!==this.$store.state.appointmentData.designerId){this.isGettingDate=!0;var e=this.getMonthRange(t.getFullYear(),t.getMonth()).split(","),input={designerId:this.$store.state.appointmentData.designerId,storeId:this.$store.state.appointmentData.merchantId,dateRange:{startDate:e[0],endDate:e[1]}};this.getDesignerBookingTimesWithRange(input)}},selectTime:function(t){"可預約"===t.status&&(this.userSelect.time=t.time)},selectDate:function(t){var e=this;if(this.morningRange=[],this.afterNoonRange=[],this.nightRange=[],1!==this.$store.state.appointmentData.designerId){this.userSelect.date=t,this.bookingTimes=[];var n=this.bookingDate.find((function(e){return e.date===t}));this.bookingTimes=null==n?void 0:n.bookingTimes,this.bookingTimes&&this.bookingTimes.forEach((function(t){var n=new Date(t.time).getHours();n<13&&e.morningRange.push(t),n>=13&&n<18&&e.afterNoonRange.push(t),n>=18&&e.nightRange.push(t)}))}else{var r=new Date(t),o=r.getFullYear(),l=r.getMonth(),c=r.getDate();this.userSelect.date=t,this.bookingTimes=[],JSON.parse(window.localStorage.getItem("merchant")).availableBookingTime.time.forEach((function(t){var n=t.split(":"),data={time:new Date(o,l,c,n[0],n[1]).getTime(),status:"可預約"};n[0]<13&&e.morningRange.push(data),n[0]>=13&&n[0]<18&&e.afterNoonRange.push(data),n[0]>=18&&e.nightRange.push(data)}))}},forMatDate:function(t){return t<10?"0"+t:t},toSelectService:function(){var time=new Date(this.userSelect.time),t=time.getFullYear(),e=this.forMatDate(time.getMonth()+1),n=this.forMatDate(time.getDate()),r=this.forMatDate(time.getHours()),o=this.forMatDate(time.getMinutes()),data={time:"".concat(t,"/").concat(e,"/").concat(n," ").concat(r,":").concat(o),timestamp:this.userSelect.time};this.$store.dispatch("appointmentData/handleSetTime",data),this.$router.push("/member/appointment/selectService")},filterOldTimes:function(time){return Date.now()+18e5>=time}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,input;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===t.$store.state.appointmentData.designerId){e.next=12;break}return t.isGettingDate=!0,t.$store.dispatch("loading/isLoading",!0),t.$store.state.appointmentData.merchantId&&t.$store.state.appointmentData.designerId||t.$router.push("/member/appointment"),n=new Date(Date.now()),e.next=8,t.getMonthRange(n.getFullYear(),n.getMonth());case 8:r=e.sent,o=r.split(","),input={designerId:t.$store.state.appointmentData.designerId,storeId:t.$store.state.appointmentData.merchantId,dateRange:{startDate:o[0],endDate:o[1]}},t.getDesignerBookingTimesWithRange(input);case 12:case"end":return e.stop()}}),e)})))()}}),l=n(33),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return t.isLoading?t._e():e("section",{attrs:{id:"firstPos"}},[e("div",{staticClass:"w-full p-4 flex items-center gap-4 border border-[#aeaeae] bg-white rounded-lg mt-3",attrs:{"data-aos":"fade","data-aos-duration":"300","data-aos-once":"true","data-aos-delay":"100","data-aos-anchor":"#firstPos"}},[e("div",{staticClass:"w-6 h-6 flex justify-center items-center border-2 border-[#4ADE80] rounded-full"},[e("fa",{staticClass:"text-[#4ADE80]",attrs:{icon:"fa-solid fa-check"}})],1),t._v(" "),e("h4",{staticClass:"text-sm line-clamp-1"},[t._v("已選設計師："+t._s(t.selectDesigner)+" "),t.selectDesignerNickName&&1!==t.selectDesignerNickName?e("span",[t._v("("+t._s(t.selectDesignerNickName)+")")]):t._e()])]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"w-full",attrs:{"data-aos":"fade","data-aos-duration":"300","data-aos-once":"true","data-aos-delay":"100","data-aos-anchor":"#firstPos"}},[e("Calendar",{attrs:{filterOldDay:!0,disabledDate:t.disabledDate,isGettingDate:t.isGettingDate},on:{selectDate:function(e){return t.selectDate(e)},changeMonth:function(e){return t.changeMonth(e)}}})],1),t._v(" "),t._m(1),t._v(" "),t.userSelect.date&&t.bookingTimes?e("div",{staticClass:"flex gap-2.5 mb-2.5",attrs:{"data-aos":"fade","data-aos-duration":"400","data-aos-once":"true","data-aos-anchor":"#firstPos"}},[e("button",{staticClass:"text-sm py-2.5 w-full border border-[#aeaeae] rounded-md duration-300",class:{"bg-[#FEB401] text-white":"早上"===t.selectRange,"bg-white":"早上"!==t.selectRange},on:{click:function(e){t.selectRange="早上"}}},[t._v("早上")]),t._v(" "),e("button",{staticClass:"text-sm py-2.5 w-full border border-[#aeaeae] rounded-md duration-300",class:{"bg-[#FEB401] text-white":"下午"===t.selectRange,"bg-white":"下午"!==t.selectRange},on:{click:function(e){t.selectRange="下午"}}},[t._v("下午")]),t._v(" "),e("button",{staticClass:"text-sm py-2.5 w-full border border-[#aeaeae] rounded-md duration-300",class:{"bg-[#FEB401] text-white":"晚上"===t.selectRange,"bg-white":"晚上"!==t.selectRange},on:{click:function(e){t.selectRange="晚上"}}},[t._v("晚上")])]):t._e(),t._v(" "),t.bookingTimes&&1!==t.isDesignation?e("ul",{staticClass:"p-2.5 border border-[#aeaeae] rounded-lg shadow-[0px_2px_2px_rgba(0,0,0,0.25)] bg-white",attrs:{"data-aos":"fade","data-aos-duration":"300","data-aos-once":"true","data-aos-delay":"100","data-aos-anchor":"#firstPos"}},[t._l(t.filterTimeRange,(function(n,r){return e("li",{key:n.time,staticClass:"py-2.5 border-b-2 border-dotted border-b-[#aeaeae]",class:{"border-none":r+1===t.filterTimeRange.length,"pointer-events-none":t.filterOldTimes(n.time)},attrs:{"data-aos":"flip-up","data-aos-duration":"300","data-aos-delay":50*r,"data-aos-once":"true","data-aos-anchor":"#firstPos"},on:{click:function(e){return t.selectTime(n)}}},[e("div",{staticClass:"flex items-center justify-between"},[e("div",{staticClass:"flex items-center gap-4"},[e("div",{staticClass:"h-3 w-3 rounded-full flex justify-center items-center duration-300",class:{"bg-[#FEB401]":!n.isAppointment,"bg-[#aeaeae]":n.isAppointment||t.filterOldTimes(n.time),"bg-[#fff] border border-[#FEB401]":t.userSelect.time===n.time}},[e("fa",{staticClass:"text-[8px] text-[#FEB401] duration-700 scale-0",class:{"scale-100":t.userSelect.time===n.time},attrs:{icon:"fa-solid fa-check"}})],1),t._v(" "),e("p",{directives:[{name:"formatDate",rawName:"v-formatDate",value:"onlyTime",expression:"'onlyTime'"}],staticClass:"text-sm font-bold duration-300",class:{"text-[#AEAEAE] pointer-events-none":"可預約"!==n.status,"text-[#3F3F46]":"可預約"===n.status&&t.userSelect.time!==n.time,"text-[#FEB401]":t.userSelect.time===n.time,"text-[#bebebe]":t.filterOldTimes(n.time)}},[t._v(t._s(n.time))])]),t._v(" "),"可預約"!==n.status||t.userSelect.time===n.time||t.filterOldTimes(n.time)?t._e():e("p",{staticClass:"text-sm text-[#3F3F46]",attrs:{"data-aos":"flip-up","data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#firstPos"}},[t._v("尚可預約")]),t._v(" "),"可預約"===n.status||t.userSelect.time===n.time||t.filterOldTimes(n.time)?t._e():e("p",{staticClass:"text-sm text-[#aeaeae]",attrs:{"data-aos":"flip-up","data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#firstPos"}},[t._v("預約已滿")]),t._v(" "),"可預約"!==n.status||t.userSelect.time!==n.time||t.filterOldTimes(n.time)?t._e():e("p",{staticClass:"text-sm text-[#FEB401]",attrs:{"data-aos":"flip-up","data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#firstPos"}},[t._v("已選")]),t._v(" "),t.filterOldTimes(n.time)?e("p",{staticClass:"text-sm text-[#bebebe]",attrs:{"data-aos":"flip-up","data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#firstPos"}},[t._v("不可預約")]):t._e()])])})),t._v(" "),0===t.filterTimeRange.length&&t.userSelect.date?e("li",{staticClass:"text-center text-[#555] text-sm"},[t._v("此區間尚無時段可選")]):t._e()],2):t._e(),t._v(" "),t.bookingTimes&&1===t.isDesignation?e("ul",{staticClass:"p-2.5 border border-[#aeaeae] rounded-lg shadow-[0px_2px_2px_rgba(0,0,0,0.25)] bg-white",attrs:{"data-aos":"fade","data-aos-duration":"300","data-aos-once":"true","data-aos-delay":"100","data-aos-anchor":"#firstPos"}},[t._l(t.filterTimeRange,(function(n,r){return e("li",{key:n.time,staticClass:"py-2.5 border-b-2 border-dotted border-b-[#aeaeae]",class:{"border-none":r+1===t.filterTimeRange.length,"pointer-events-none":t.filterOldTimes(n.time)},attrs:{"data-aos":"flip-up","data-aos-duration":"300","data-aos-delay":50*r,"data-aos-once":"true","data-aos-anchor":"#firstPos"},on:{click:function(e){return t.selectTime(n)}}},[e("div",{staticClass:"flex items-center justify-between"},[e("div",{staticClass:"flex items-center gap-4"},[e("div",{staticClass:"h-3 w-3 rounded-full flex justify-center items-center duration-300",class:{"bg-[#FEB401]":!n.isAppointment,"bg-[#aeaeae]":n.isAppointment||t.filterOldTimes(n.time),"bg-[#fff] border border-[#FEB401]":t.userSelect.time===n.time}},[e("fa",{staticClass:"text-[8px] text-[#FEB401] duration-700 scale-0",class:{"scale-100":t.userSelect.time===n.time},attrs:{icon:"fa-solid fa-check"}})],1),t._v(" "),e("p",{directives:[{name:"formatDate",rawName:"v-formatDate",value:"onlyTime",expression:"'onlyTime'"}],staticClass:"text-sm font-bold duration-300",class:{"text-[#3F3F46]":t.userSelect.time!==n.time,"text-[#FEB401]":t.userSelect.time===n.time,"text-[#bebebe]":t.filterOldTimes(n.time)}},[t._v(t._s(n.time))])]),t._v(" "),t.userSelect.time===n.time||t.filterOldTimes(n.time)?t._e():e("p",{staticClass:"text-sm text-[#3F3F46]",attrs:{"data-aos":"flip-up","data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#firstPos"}},[t._v("尚可預約")]),t._v(" "),t.userSelect.time!==n.time||t.filterOldTimes(n.time)?t._e():e("p",{staticClass:"text-sm text-[#FEB401]",attrs:{"data-aos":"flip-up","data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#firstPos"}},[t._v("已選")]),t._v(" "),t.filterOldTimes(n.time)?e("p",{staticClass:"text-sm text-[#bebebe]",attrs:{"data-aos":"flip-up","data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#firstPos"}},[t._v("不可預約")]):t._e()])])})),t._v(" "),0===t.filterTimeRange.length&&t.userSelect.date?e("li",{staticClass:"text-center text-[#555] text-sm"},[t._v("此區間尚無時段可選")]):t._e()],2):t._e(),t._v(" "),t.bookingTimes?t._e():e("p",{staticClass:"text-sm text-[#aeaeae]"},[t._v("請先選擇日期")]),t._v(" "),e("button",{staticClass:"fixed bottom-24 left-[5%] w-[90%] mt-5 py-2.5 shadow-md rounded-md duration-300 flex items-center justify-center gap-4 z-0",class:{"bg-[#aeaeae]":!t.userSelect.time||!t.userSelect.date,"bg-[#232D4E]":t.userSelect.time&&t.userSelect.date},attrs:{disabled:!t.userSelect.time||!t.userSelect.date,"data-mdb-ripple":"true","data-mdb-ripple-color":"light"},on:{click:function(e){return t.toSelectService()}}},[e("p",{staticClass:"text-lg text-white"},[t._v("選擇服務項目")]),t._v(" "),e("fa",{staticClass:"text-white",attrs:{icon:"fa-solid fa-angle-right"}})],1)])}),[function(){var t=this,e=t._self._c;return e("h4",{staticClass:"text-sm text-[#666] font-bold mt-6 mb-2",attrs:{"data-aos":"fade","data-aos-duration":"300","data-aos-once":"true","data-aos-delay":"100","ata-aos-anchor":"#firstPos"}},[t._v("選擇日期"),e("sup",{staticClass:"text-red-500"},[t._v(" *")])])},function(){var t=this,e=t._self._c;return e("div",{attrs:{"data-aos":"fade","data-aos-duration":"300","data-aos-once":"true","data-aos-delay":"100","ata-aos-anchor":"#firstPos"}},[e("h4",{staticClass:"text-sm text-[#666] font-bold mt-6 mb-2"},[t._v("選擇時段"),e("sup",{staticClass:"text-red-500"},[t._v(" *")])])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Calendar:n(337).default})}}]);