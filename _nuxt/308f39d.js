(window.webpackJsonp=window.webpackJsonp||[]).push([[32,7,10],{334:function(t,e,n){"use strict";n.r(e);var o={name:"Modal",props:{showModal:{type:Boolean,default:function(){return!1}},isMemberRules:{type:Boolean,default:function(){return!1}},showCancelBtn:{type:Boolean,default:function(){return!0}}},data:function(){return{isShow:!1}},methods:{cancelModalEmit:function(t){this.$emit("cancelModal",t)}}},l=n(33),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("section",[e("transition",{attrs:{name:"fade"}},[t.showModal?e("div",{staticClass:"fixed w-screen h-screen bg-black opacity-25 top-0 left-0 z-40"}):t._e()]),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.showModal?e("div",{staticClass:"fixed w-full h-full top-0 left-0 px-[5%] flex justify-center items-center z-40 cancel shadow-[0px_2px_2px_rgba(0,0,0,0.25)]",on:{click:function(e){return t.cancelModalEmit(e)}}},[e("div",{staticClass:"w-full max-w-[768px] max-h-[80vh] overflow-y-auto bg-white rounded-md p-5 relative z-[-1]",attrs:{"data-aos":"flip-left","data-aos-duration":"400"}},[t.showCancelBtn?e("button",{staticClass:"absolute right-5 top-5 cancel",on:{click:function(e){return t.cancelModalEmit(e)}}},[e("fa",{staticClass:"text-3xl cancel",attrs:{icon:"fa-solid fa-xmark"},on:{click:function(e){return t.cancelModalEmit(e)}}})],1):t._e(),t._v(" "),t.isMemberRules?e("div",{staticClass:"flex justify-center items-center gap-1.5 mb-5 mt-10"},[e("fa",{staticClass:"text-xl",attrs:{icon:"fa-regular fa-circle-question"}}),t._v(" "),e("span",{staticClass:"text-lg font-bold"},[t._v("會籍說明")])],1):t._e(),t._v(" "),t._t("default")],2)]):t._e()])],1)}),[],!1,null,null,null);e.default=component.exports},340:function(t,e,n){"use strict";n.r(e);n(153);var o={name:"Ticket-index",props:{id:{type:String,default:function(){return 0}},idx:{type:Number,default:function(){return 0}},title:{type:String,default:function(){return""}},price:{type:Number,default:function(){return 0}},totalPrice:{type:Number,default:function(){return 0}},canUse:{type:Number,default:function(){return 0}},used:{type:Number,default:function(){return 0}},time:{type:Number,default:function(){return 0}}},methods:{openRecord:function(t){this.$emit("openRecord",t)}}},l=n(33),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"w-full bg-white rounded-lg shadow-[0px_2px_2px_rgba(0,0,0,0.25)] mb-2.5"},[e("div",{staticClass:"grid grid-cols-12"},[e("div",{staticClass:"col-span-4 text-white font-bold relative bg-[#FEB401]"},[e("div",{staticClass:"absolute h-[calc(100%+20px)] w-2.5 top-0 -left-2.5 bg-[#f1f1f1] z-40"}),t._v(" "),e("div",{staticClass:"absolute h-2 5 w-2.5 -bottom-2.5 left-0 bg-[#f1f1f1] z-40"}),t._v(" "),e("div",{staticClass:"absolute w-5 h-5 rounded-full -left-2.5 -top-2.5 bg-[#f1f1f1]"}),t._v(" "),e("div",{staticClass:"absolute w-5 h-5 rounded-full -left-2.5 -top-2.5 translate-y-[26px] bg-[#f1f1f1] shadow-[inset_-1px_1px_2px_1px_rgba(0,0,0,0.25)]"}),t._v(" "),e("div",{staticClass:"absolute w-5 h-5 rounded-full -left-2.5 -top-2.5 translate-y-[52px] bg-[#f1f1f1] shadow-[inset_-1px_1px_2px_1px_rgba(0,0,0,0.25)]"}),t._v(" "),e("div",{staticClass:"absolute w-5 h-5 rounded-full -left-2.5 -top-2.5 translate-y-[78px] bg-[#f1f1f1] shadow-[inset_-1px_1px_2px_1px_rgba(0,0,0,0.25)]"}),t._v(" "),e("div",{staticClass:"absolute w-5 h-5 rounded-full -left-2.5 -top-2.5 translate-y-[104px] bg-[#f1f1f1] shadow-[inset_-1px_1px_2px_0px_rgba(0,0,0,0.25)]"}),t._v(" "),e("div",{staticClass:"w-full h-full flex justify-center items-center py-2 pl-4 flex-nowrap gap-1"},[e("p",{staticClass:"text-xs mt-1"},[t._v("NT$")]),t._v(" "),e("p",{staticClass:"text-lg"},[t._v(t._s(t.price)+"/次")])])]),t._v(" "),e("div",{staticClass:"col-span-8 py-2 px-1"},[e("h4",{staticClass:"font-bold line-clamp-1"},[t._v(t._s(t.title))]),t._v(" "),e("span",{staticClass:"text-[#666] text-sm"},[t._v("可用次數："+t._s(t.canUse-t.used)+"/"+t._s(t.canUse)+" (總金額:"+t._s(t.totalPrice)+")")]),t._v(" "),e("div",{staticClass:"w-full border-b border-b-[#DDD]"}),t._v(" "),e("p",{staticClass:"text-[#666] text-xs mt-2"},[t._v("購買日期："),e("span",{directives:[{name:"formatDate",rawName:"v-formatDate",value:"date",expression:"'date'"}]},[t._v(t._s(t.time))])]),t._v(" "),e("div",{staticClass:"flex justify-end items-center gap-1"},[e("fa",{staticClass:"text-xs text-[#57CDFF]",attrs:{icon:"fa-regular fa-circle-info"},on:{click:function(e){return t.openRecord(t.idx)}}}),t._v(" "),e("span",{staticClass:"text-xs text-[#57CDFF]",on:{click:function(e){return t.openRecord(t.idx)}}},[t._v("使用紀錄")])],1)])])])])}),[],!1,null,null,null);e.default=component.exports},370:function(t,e,n){"use strict";n.r(e);n(62),n(50),n(11),n(21),n(235),n(42),n(22),n(61),n(82);var o={name:"member-ticket",head:function(){return{meta:[{name:"theme-color",content:"#ffffff"}]}},data:function(){return{tickets:[],merchants:JSON.parse(window.localStorage.getItem("allMerchants"))||[],selectStore:"",showRecord:!1,cacheRecord:{}}},computed:{isLoading:function(){return this.$store.state.loading.isLoading}},methods:{handleOpenRecord:function(t){this.cacheRecord=this.tickets.find((function(e,n){return t===n})),this.showRecord=!0},cancelModal:function(t){t.stopPropagation(),(Array.from(t.target.classList).includes("cancel")||"path"===t.target.nodeName)&&(this.showRecord=!1)},getCoupons:function(){var t=this;this.tickets=[],this.$store.dispatch("loading/isLoading",!0);var e=this.selectStore?this.selectStore:"";this.api.customerCouponBalanceReport(e).then((function(e){t.tickets=e.data.customerCouponBalanceReport.length>0?e.data.customerCouponBalanceReport[0].data:[],t.$store.dispatch("loading/isLoading",!1)})).catch((function(t){console.log(t)}))}},mounted:function(){var t=JSON.parse(window.localStorage.getItem("merchant"));this.merchants[0]&&(this.selectStore=this.merchants[0].id?this.merchants[0].id:null==t?void 0:t.id,this.getCoupons())}},l=n(33),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("section",{staticClass:"w-full max-w-[768px] mx-auto",attrs:{id:"firstPos"}},[t._m(0),t._v(" "),t.merchants.length>0&&!t.isLoading?e("div",{attrs:{"data-aos":"zoom-in","data-aos-duration":"300","data-aos-once":"true"}},[e("div",{staticClass:"w-full relative mb-5"},[t.merchants.length>0?e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectStore,expression:"selectStore"}],staticClass:"w-full p-3 text-center rounded-lg shadow-[0px_2px_2px_rgba(0,0,0,0.25)] bg-white appearance-none",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectStore=e.target.multiple?n:n[0]},function(e){return t.getCoupons()}]}},t._l(t.merchants,(function(n){return e("option",{key:n.id,domProps:{value:n.id}},[t._v(t._s(n.name))])})),0):t._e(),t._v(" "),e("fa",{staticClass:"absolute right-5 top-1/2 -translate-y-1/2",attrs:{icon:"fa-regular fa-angle-down"}})],1)]):t._e(),t._v(" "),t.tickets.length>0&&!t.isLoading?e("div",{attrs:{id:"position"}},t._l(t.tickets,(function(n,o){return e("Ticket",{key:n.couponId+o,attrs:{id:n.couponId,idx:o,title:n.couponName,canUse:n.totalCount,used:n.usedCount,price:n.singleCouponPrice,totalPrice:n.singleCouponPrice*n.totalCount,time:n.boughtDate,"data-aos":"zoom-in","data-aos-delay":100+100*o,"data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#position"},on:{openRecord:function(e){return t.handleOpenRecord(e)}}})})),1):t._e(),t._v(" "),0!==t.tickets.length||t.isLoading?t._e():e("ul",{staticClass:"bg-white rounded-lg min-h-[211px] shadow-md pt-10",attrs:{"data-aos":"fade-up","data-aos-once":"true","data-aos-duration":"500","data-aos-delay":"150"}},[t._m(1)]),t._v(" "),e("Modal",{attrs:{showModal:t.showRecord},on:{cancelModal:t.cancelModal}},[e("h3",{staticClass:"text-center font-bold mt-10"},[t._v(t._s(t.cacheRecord.couponName))]),t._v(" "),t.cacheRecord.usedCount&&t.cacheRecord.usageRecord.length>0?e("table",{staticClass:"w-full text-left mt-5 text-sm"},[e("thead",{pre:!0},[e("tr",[e("th",{pre:!0,attrs:{class:"text-center"}},[t._v("項次")]),t._v(" "),e("th",[t._v("使用日期")]),t._v(" "),e("th",{pre:!0,attrs:{class:"text-center"}},[t._v("使用張數")])])]),t._v(" "),e("tbody",t._l(t.cacheRecord.usageRecord,(function(n,o){return e("tr",{key:n.usedDate},[e("td",{staticClass:"text-center"},[t._v(t._s(o+1))]),t._v(" "),e("td",[e("p",{directives:[{name:"formatDate",rawName:"v-formatDate",value:"time",expression:"'time'"}]},[t._v(t._s(n.usedDate))])]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.usageCount))])])})),0)]):t._e(),t._v(" "),t.cacheRecord.usedCount&&t.cacheRecord.usageRecord.length>0?e("div",{staticClass:"mt-10"},[e("div",{staticClass:"grid grid-cols-12 w-full gap-2 text-sm"},[e("div",{pre:!0,attrs:{class:"col-span-9 text-right"}},[t._v("可用次數 :")]),t._v(" "),e("div",{staticClass:"col-span-3"},[t._v(t._s(t.cacheRecord.remainingCount)+"/"+t._s(t.cacheRecord.totalCount))]),t._v(" "),e("div",{pre:!0,attrs:{class:"col-span-9 text-right"}},[t._v("總金額 :")]),t._v(" "),e("div",{staticClass:"col-span-3"},[t._v("$"+t._s(t.cacheRecord.singleCouponPrice*t.cacheRecord.totalCount))])])]):e("div",[e("p",{staticClass:"text-[#bebebe] text-center my-5 text-sm"},[t._v("此卡券尚無使用紀錄")])])])],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"fixed left-0 top-0 w-full px-[10%] text-lg bg-white py-4 flex items-center"},[e("fa",{staticClass:"text-2xl",attrs:{icon:"fa-solid fa-angle-left"},on:{click:function(e){return t.$router.push("/member")}}}),t._v(" "),e("h2",{pre:!0,attrs:{class:"absolute top-1/2 translate-y-[-50%] left-[50%] translate-x-[-50%] text-lg font-bold"}},[t._v("我的卡券")])],1)},function(){var t=this._self._c;return t("li",{staticClass:"text-center text-sm text-[#aeaeae]"},[t("p",[this._v("目前無資料")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Ticket:n(340).default,Modal:n(334).default})}}]);